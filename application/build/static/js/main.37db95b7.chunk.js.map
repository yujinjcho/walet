{"version":3,"sources":["CategoryTotal.js","authHelper.js","EditCategory.js","EditTag.js","CategoryTransaction.js","CategoryTransactions.js","CategorySection.js","helper.js","values.js","Summary.js","api.js","Navigation.js","withLogin.js","SummaryContainer.js","Login.js","Logout.js","query.js","Auth.js","AccountPage.js","App.js","serviceWorker.js","index.js"],"names":["CategoryTotal","state","open","_this$props","this","props","categoryName","amount","react_default","a","createElement","ListGroup_default","Item","className","Container_default","Row_default","Col_default","xs","Math","round","Component","authHelper","saveToken","token","localStorage","setItem","getToken","getItem","removeToken","removeItem","header","Object","defineProperty","EditCategory","targetType","targetValue","_this","transaction","transaction_id","setTransactionIdRule","e","setState","setNameRule","name","setNameContainsRule","undefined","setCategoryRule","category_id","handleSubmit","preventDefault","target","nameContainsValue","value","rule","JSON","stringify","target_type","target_value","category","selectedCategory","headers","objectSpread","Content-Type","fetch","method","body","then","res","json","setSuccess","getSummaryData","catch","_","setError","handleClose","show","Fragment","Modal_default","onHide","Header","Title","Body","Form_default","onSubmit","Check","defaultChecked","type","label","id","onClick","Control","placeholder","join","Footer","Button_default","variant","EditTag","assignedCategory","tag","selectedTag","assign","CategoryTransaction","openCategoryEdit","openTagEdit","renderCategoryEdit","action","includes","renderTagEdit","handleCategoryClose","handleTagClose","allCategories","allTags","accountId","_this$state","setTags","tags","map","t","Creatable_default","options","defaultValue","onChange","isMulti","src_EditCategory_0","src_EditTag_0","CategoryTransactions","sortTransactions","transactions","slice","sort","x","y","_this2","src_CategoryTransaction_0","key","CategorySection","src_CategoryTotal_0","Collapse_default","in","src_CategoryTransactions_0","applyCategoryRules","categoryRules","transactionIdLookup","createCategoryLookup","nameLookup","nameContainsLookup","categoryIdLookup","assignCategory","applyTagRules","shouldExcludeTags","meetsCriteria","intersects","assignTags","tagRules","ruleFromTransactionIds","filter","r","ruleFromTransactionIdsLookup","createTagLookup","ruleFromNames","ruleFromNamesLookup","ruleFromNameContains","ruleFromNameContainsLookup","ruleFromCategories","ruleFromCategoriesLookup","idTags","nameTags","nameContainsTags","keys","flatMap","nameContainsKey","toLowerCase","categoryTags","Array","from","Set","concat","ruleTags","rt","length","createLookup","rules","field","reduce","acc","selectCategory","hasOwnProperty","_i","_Object$keys","nameContainsPattern","helper","summary","push","c","updatedTransactions","transactionsWithTags","values","months","Summary","error","success","selectTags","currentYear","sortCategories","handleActiveTagChange","data","updateMonth","currentMonth","toggleShouldExcludeTags","summaryData","categories","total","monthOptions","Alert_default","react_select_esm","find","src_CategorySection","api","loadTransactions","monthName","month","indexOf","console","warn","loadCategoryRules","loadTagRules","loadCategories","loadTags","Navigation","homeHandler","history","logoutHandler","accountHandler","Navbar","collapseOnSelect","expand","bg","Brand","href","Toggle","aria-controls","Collapse","Nav","Link","withRouter","withLogin","Wrapped","WithLogin","_Component","_getPrototypeOf2","classCallCheck","_len","arguments","args","_key","possibleConstructorReturn","getPrototypeOf","call","apply","handleError","inherits","createClass","result","src_Navigation_0","Date","getMonth","Promise","all","_res","slicedToArray","src_Summary_0","Login","authRedirectUrl","size","block","Logout","Redirect","to","query","parse","window","location","search","ignoreQueryPrefix","Auth","jwt","accounts","handleOnSuccess","publicToken","metadata","request","refreshAccounts","handleOnExit","log","formatInstitution","institutionId","split","upperFirst","account","official","official_names","toLower","names","compact","react_plaid_link_lib_default","clientName","env","product","publicKey","onExit","onSuccess","item_id","Card_default","style","width","institution_id","Text","formatAccountDescription","App","BrowserRouter","Route","exact","path","component","SummaryContainer","AccountPage","Boolean","hostname","match","ReactDOM","render","src_App","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.37db95b7.chunk.js","sourcesContent":["import React, { Component } from 'react';\nimport ListGroup from 'react-bootstrap/ListGroup'\nimport Container from 'react-bootstrap/Container'\nimport Row from 'react-bootstrap/Row'\nimport Col from 'react-bootstrap/Col'\n\nimport './CategoryTotal.css';\nimport './TotalSection.css'\n\nclass CategoryTotal extends Component {\n  state = {\n    open: false\n  }\n\n  render() {\n    const { categoryName, amount } = this.props;\n    return (\n      <ListGroup.Item className='total-section'>\n        <Container>\n          <Row>\n            <Col xs={9}>{ categoryName }</Col>\n            <Col className='category-subtotal' >{ Math.round(amount) }</Col>\n          </Row>\n        </Container>\n      </ListGroup.Item>\n    );\n  }\n}\n\nexport default CategoryTotal\n","const key = 'X-Auth-Token';\n\nconst saveToken = token => localStorage.setItem('token', token);\n\nconst getToken = () => localStorage.getItem('token');\n\nconst removeToken = () => localStorage.removeItem('token');\n\nconst header = () => ({\n  [key]: localStorage.getItem('token')\n});\n\nexport default {\n  saveToken,\n  getToken,\n  removeToken,\n  header\n}\n","import React, { Component } from 'react';\nimport Modal from 'react-bootstrap/Modal';\nimport Button from 'react-bootstrap/Button';\nimport Form from 'react-bootstrap/Form';\nimport authHelper from './authHelper';\n\nimport './EditCategory.css';\n\nclass EditCategory extends Component {\n\n  state = {\n    targetType: 'transaction_id',\n    targetValue: this.props.transaction.transaction_id,\n  };\n\n  setTransactionIdRule = (e) => {\n    this.setState({targetType: 'transaction_id', targetValue: this.props.transaction.transaction_id});\n  }\n\n  setNameRule = (e) => {\n    this.setState({targetType: 'name', targetValue: this.props.transaction.name});\n  }\n\n  setNameContainsRule = (e) => {\n    this.setState({ targetType: 'name_contains', targetValue: undefined });\n  }\n\n  setCategoryRule = (e) => {\n    this.setState({ targetType: 'category_id', targetValue: this.props.transaction.category_id });\n  }\n\n  handleSubmit = (e) => {\n    e.preventDefault();\n\n    const { targetType } = this.state;\n    const targetValue = targetType === 'name_contains'\n      ? e.target.nameContainsValue.value\n      : this.state.targetValue\n\n    const rule = JSON.stringify({\n      target_type: targetType,\n      target_value: targetValue,\n      category: this.props.selectedCategory,\n    });\n\n    const headers = {...{ 'Content-Type': 'application/json' }, ...authHelper.header()}\n    fetch(`/api/category_rules`, {\n      method: 'POST',\n      headers,\n      body: rule\n    })\n      .then(res => res.json())\n      .then(res => {\n        this.props.setSuccess('Rule successfully created');\n        this.props.getSummaryData();\n      })\n      .catch(_ => this.props.setError('There was an issue creating the rule'))\n\n    this.props.handleClose();\n  }\n\n  render() {\n    const { show, transaction, selectedCategory, handleClose } = this.props;\n    return (\n      <>\n\n        <Modal show={show} onHide={ handleClose }>\n          <Modal.Header >\n            <Modal.Title>Create New Rule</Modal.Title>\n          </Modal.Header>\n\n          <Modal.Body>\n            Assign the category <b>{ selectedCategory }</b> to the following:\n          </Modal.Body>\n\n          <Form onSubmit={this.handleSubmit}>\n            <Modal.Body>\n\n              <div className='category-rule-option' >\n                <Form.Check\n                  defaultChecked\n                  type=\"radio\"\n                  label='Only this transaction'\n                  name=\"ruleOption\"\n                  id=\"formHorizontalRadios1\"\n                  onClick={ this.setTransactionIdRule }\n                />\n              </div>\n\n              <div className='category-rule-option' >\n                <Form.Check\n                  type=\"radio\"\n                  label='Transaction name matching: '\n                  name=\"ruleOption\"\n                  id=\"formHorizontalRadios1\"\n                  onClick={ this.setNameRule }\n                />\n                <b>{ transaction.name }</b>\n              </div>\n\n              <div className='category-rule-option' >\n                <Form.Check\n                  type=\"radio\"\n                  label=\"Transaction names containing: \"\n                  name=\"ruleOption\"\n                  id=\"formHorizontalRadios2\"\n                  onClick={ this.setNameContainsRule }\n                />\n                <Form.Control name=\"nameContainsValue\" placeholder={transaction.name} />\n              </div>\n\n              <div className='category-rule-option' >\n                <Form.Check\n                  type=\"radio\"\n                  label=\"Categories matching: \"\n                  name=\"ruleOption\"\n                  id=\"formHorizontalRadios3\"\n                  onClick={ this.setCategoryRule }\n                />\n                <b>{ transaction.category.join( ' > ') }</b>\n              </div>\n\n            </Modal.Body>\n\n            <Modal.Footer>\n              <Button variant=\"secondary\" onClick={ handleClose }>\n                Close\n              </Button>\n              <Button variant=\"primary\" type=\"submit\">\n                Save Changes\n              </Button>\n            </Modal.Footer>\n\n          </Form>\n        </Modal>\n      </>\n    );\n  }\n}\n\nexport default EditCategory;\n","import React, { Component } from 'react';\nimport Modal from 'react-bootstrap/Modal'\nimport Button from 'react-bootstrap/Button'\nimport Form from 'react-bootstrap/Form'\nimport authHelper from './authHelper';\n\nimport './EditTag.css';\n\nclass EditTag extends Component {\n\n  state = {\n    targetType: 'transaction_id',\n    targetValue: this.props.transaction.transaction_id,\n  };\n\n  setTransactionIdRule = (e) => {\n    this.setState({targetType: 'transaction_id', targetValue: this.props.transaction.transaction_id});\n  }\n\n  setNameRule = (e) => {\n    this.setState({targetType: 'name', targetValue: this.props.transaction.name});\n  }\n\n  setNameContainsRule = (e) => {\n    this.setState({ targetType: 'name_contains', targetValue: undefined });\n  }\n\n  setCategoryRule = (e) => {\n    this.setState({ targetType: 'category', targetValue: this.props.transaction.assignedCategory });\n  }\n\n  handleSubmit = (e) => {\n    e.preventDefault();\n\n    const { targetType } = this.state;\n    const targetValue = targetType === 'name_contains'\n      ? e.target.nameContainsValue.value\n      : this.state.targetValue\n\n    if (targetType && targetValue) {\n      const rule = JSON.stringify({\n        target_type: targetType,\n        target_value: targetValue,\n        tag: this.props.selectedTag,\n      });\n\n      const headers = Object.assign({ 'Content-Type': 'application/json'}, authHelper.header());\n      fetch('/api/tag_rules', {\n        method: 'POST',\n        headers: headers,\n        body: rule\n      })\n        .then(res => res.json())\n        .then(res => {\n          this.props.setSuccess('Rule successfully created');\n          this.props.getSummaryData();\n        })\n        .catch(_ => this.props.setError('There was an issue creating the rule'))\n    }\n\n    this.props.handleClose();\n  }\n\n  render() {\n    const { show, transaction, selectedTag, handleClose } = this.props;\n    return (\n      <>\n\n        <Modal show={show} onHide={ handleClose }>\n          <Modal.Header >\n            <Modal.Title>Create New Rule</Modal.Title>\n          </Modal.Header>\n\n          <Modal.Body>\n            Assign the tag <b>{ selectedTag }</b> to the following:\n          </Modal.Body>\n\n          <Form onSubmit={this.handleSubmit}>\n            <Modal.Body>\n\n              <div className='tag-rule-option' >\n                <Form.Check\n                  defaultChecked\n                  type=\"radio\"\n                  label='Only this transaction'\n                  name=\"ruleOption\"\n                  id=\"formHorizontalRadios1\"\n                  onClick={ this.setTransactionIdRule }\n                />\n              </div>\n\n              <div className='tag-rule-option' >\n                <Form.Check\n                  type=\"radio\"\n                  label='Transaction name matching: '\n                  name=\"ruleOption\"\n                  id=\"formHorizontalRadios2\"\n                  onClick={ this.setNameRule }\n                />\n                <b>{ transaction.name }</b>\n              </div>\n\n              <div className='tag-rule-option' >\n                <Form.Check\n                  type=\"radio\"\n                  label=\"Transaction names containing: \"\n                  name=\"ruleOption\"\n                  id=\"formHorizontalRadios3\"\n                  onClick={ this.setNameContainsRule }\n                />\n                <Form.Control name=\"nameContainsValue\" placeholder={transaction.name} />\n              </div>\n\n              <div className='tag-rule-option' >\n                <Form.Check\n                  type=\"radio\"\n                  label=\"Assigned category matching: \"\n                  name=\"ruleOption\"\n                  id=\"formHorizontalRadios4\"\n                  onClick={ this.setCategoryRule }\n                />\n                <b>{ transaction.assignedCategory }</b>\n              </div>\n\n            </Modal.Body>\n\n            <Modal.Footer>\n              <Button variant=\"secondary\" onClick={ handleClose }>\n                Close\n              </Button>\n              <Button variant=\"primary\" type=\"submit\">\n                Save Changes\n              </Button>\n            </Modal.Footer>\n\n          </Form>\n        </Modal>\n      </>\n    );\n  }\n}\n\nexport default EditTag;\n","import React, { Component } from 'react';\nimport ListGroup from 'react-bootstrap/ListGroup'\nimport Container from 'react-bootstrap/Container'\nimport Row from 'react-bootstrap/Row'\nimport Col from 'react-bootstrap/Col'\nimport EditCategory from './EditCategory';\nimport EditTag from './EditTag';\nimport CreatableSelect from 'react-select/lib/Creatable';\n\nimport './CategoryTransaction.css';\n\n\nclass CategoryTransaction extends Component {\n  state = {\n    openCategoryEdit: false,\n    openTagEdit: false,\n    selectedCategory: undefined,\n    selectedTag: undefined,\n  }\n\n  renderCategoryEdit = (transaction) => (value, action) => {\n    if (['select-option', 'create-option'].includes(action.action)) {\n      this.setState({ openCategoryEdit: true, selectedCategory: value.value })\n    }\n  };\n\n  renderTagEdit = (transaction) => (value, action) => {\n    if (['select-option', 'create-option'].includes(action.action)) {\n      this.setState({ openTagEdit: true, selectedTag: value[0].value })\n    };\n  };\n\n  handleCategoryClose = () => {\n    this.setState({ openCategoryEdit: false })\n  };\n\n  handleTagClose = () => {\n    this.setState({ openTagEdit: false })\n  };\n\n  render() {\n    const {\n      transaction,\n      allCategories,\n      allTags,\n      setError,\n      setSuccess,\n      accountId,\n      getSummaryData,\n    } = this.props;\n    const { openCategoryEdit, openTagEdit, selectedCategory, selectedTag } = this.state;\n    const setTags = transaction.tags.map(t => {return {label: t, value: t}})\n\n\n\n    return (\n      <ListGroup.Item className='transaction-row'>\n          <Container>\n            <Row>\n              <Col xs={5} className='category-transactions-name'>{ transaction.name }</Col>\n\n              <Col xs={2} className='category-transactions-name'>\n                <CreatableSelect\n                  options={ allCategories }\n                  defaultValue={ selectedCategory }\n                  onChange={ this.renderCategoryEdit(transaction) }\n                />\n              </Col>\n\n              <Col xs={3} className='category-transactions-name'>\n                <CreatableSelect\n                  isMulti\n                  onChange={ this.renderTagEdit(transaction) }\n                  defaultValue={ setTags }\n                  options={ allTags }\n                />\n\n              </Col>\n              <Col className='category-transactions' >{ Math.round(transaction.amount) }</Col>\n            </Row>\n\n            <EditCategory\n              transaction={ transaction }\n              selectedCategory={ selectedCategory }\n              show={ openCategoryEdit }\n              handleClose={ this.handleCategoryClose }\n              setError={ setError }\n              setSuccess= { setSuccess }\n              accountId = { accountId }\n              getSummaryData = { getSummaryData }\n            />\n            <EditTag\n              transaction={ transaction }\n              selectedCategory={ selectedCategory }\n              selectedTag={ selectedTag }\n              show={ openTagEdit }\n              handleClose={ this.handleTagClose }\n              setError={ setError }\n              setSuccess= { setSuccess }\n              accountId = { accountId }\n              getSummaryData = { getSummaryData }\n\n            />\n\n          </Container>\n      </ListGroup.Item>\n    );\n  }\n}\n\nexport default CategoryTransaction;\n","import React, { Component } from 'react';\nimport ListGroup from 'react-bootstrap/ListGroup'\n\nimport CategoryTransaction from './CategoryTransaction';\n\nimport './CategoryTransactions.css';\n\n\nclass CategoryTransactions extends Component {\n\n  sortTransactions = (transactions) => transactions.slice().sort((x,y) => y.amount - x.amount)\n\n  render() {\n    const { transactions } = this.props;\n    return (\n      <ListGroup>\n        { this.sortTransactions(transactions).map(transaction =>\n\n            <CategoryTransaction\n              key = {transaction.transaction_id}\n              transaction={transaction}\n              {...this.props}\n            />\n\n          )\n        }\n\n      </ListGroup>\n    );\n  }\n}\n\nexport default CategoryTransactions;\n","import React, { Component } from 'react';\n\nimport CategoryTotal from './CategoryTotal';\nimport CategoryTransactions from './CategoryTransactions';\nimport Collapse from 'react-bootstrap/Collapse'\n\nclass CategorySection extends Component {\n  state = {\n    open: false\n  }\n\n  render() {\n    const { open } = this.state;\n    const { category } = this.props;\n\n    return (\n      <div>\n        <div onClick={ () => this.setState({ open: !open }) }>\n          <CategoryTotal categoryName={category.category} amount={category.amount} />\n        </ div>\n        <Collapse in={open}>\n          <div>\n            <CategoryTransactions\n              transactions={ category.transactions }\n              {...this.props}\n            />\n          </div>\n        </Collapse>\n      </div>\n    );\n  }\n}\n\nexport default CategorySection;\n","\nconst applyRules = (transactions, categoryRules, tagRules, tags, shouldExcludeTags) => {\n  const updatedTransactions = applyCategoryRules(transactions, categoryRules);\n  const transactionsWithTags = assignTags(updatedTransactions, tagRules);\n  const result = applyTagRules(transactionsWithTags, tags, shouldExcludeTags);\n  return result;\n};\n\nconst createSummary = (transactions) => {\n  const summary = transactions\n    .filter(t => t.show)\n    .reduce(\n      (acc,x) => {\n        if (acc.hasOwnProperty(x.assignedCategory)) {\n          acc[x.assignedCategory].amount += x.amount;\n          acc[x.assignedCategory].transactions.push(x);\n        } else {\n          acc[x.assignedCategory] = {\n            amount: x.amount,\n            transactions: [x]\n          }\n        }\n        return acc;\n      }\n      ,{})\n\n  return Object.keys(summary).map(c => {return {category: c, amount: summary[c].amount, transactions: summary[c].transactions }});\n};\n\n\nconst groupTransactions = (transactions) => {\n  return transactions\n    .reduce(\n      (acc,x) => {\n        acc.hasOwnProperty(x.category) ? acc[x.category].push(x) : acc[x.category] = [x];\n        return acc;\n      }\n      ,{})\n};\n\nconst applyCategoryRules = (transactions, categoryRules) => {\n  const transactionIdLookup = createCategoryLookup(categoryRules, 'transaction_id')\n  const nameLookup = createCategoryLookup(categoryRules, 'name')\n  const nameContainsLookup = createCategoryLookup(categoryRules, 'name_contains')\n  const categoryIdLookup = createCategoryLookup(categoryRules, 'category_id')\n\n  return transactions.map(transaction => assignCategory(transaction, transactionIdLookup, nameLookup, nameContainsLookup, categoryIdLookup))\n};\n\nconst applyTagRules = (transactions, tags, shouldExcludeTags) => {\n  return transactions.map(t => {\n    const meetsCriteria = intersects(t.tags, tags);\n    return Object.assign(t, { show: shouldExcludeTags ? !meetsCriteria : meetsCriteria });\n  });\n};\n\nconst assignTags = (transactions, tagRules) => {\n  const ruleFromTransactionIds = tagRules.filter(r => r['target_type'] === 'transaction_id');\n  const ruleFromTransactionIdsLookup = createTagLookup(ruleFromTransactionIds, 'transaction_id');\n\n  const ruleFromNames = tagRules.filter(r => r['target_type'] === 'name')\n  const ruleFromNamesLookup = createTagLookup(ruleFromNames, 'name');\n\n  const ruleFromNameContains = tagRules.filter(r => r['target_type'] === 'name_contains')\n  const ruleFromNameContainsLookup = createTagLookup(ruleFromNameContains, 'name_contains');\n\n  const ruleFromCategories = tagRules.filter(r => r['target_type'] === 'category')\n  const ruleFromCategoriesLookup = createTagLookup(ruleFromCategories, 'category');\n\n  return transactions.map(t => {\n    const idTags = ruleFromTransactionIdsLookup[t.transaction_id] || [];\n    const nameTags = ruleFromNamesLookup[t.name] || [];\n    const nameContainsTags = Object.keys(ruleFromNameContainsLookup).flatMap(nameContainsKey => {\n      return t.name.toLowerCase().includes(nameContainsKey.toLowerCase())\n        ? ruleFromNameContainsLookup[nameContainsKey]\n        : []\n    });\n    const categoryTags = ruleFromCategoriesLookup[t.assignedCategory] || [];\n    const tags = Array.from(new Set(idTags.concat(nameTags).concat(nameContainsTags).concat(categoryTags)))\n\n    return Object.assign(t, {tags: tags})\n  })\n};\n\n\nconst intersects = (ruleTags, tags) => ruleTags.filter(rt => tags.includes(rt)).length > 0;\n\nconst createLookup = (rules, targetType, field) => rules\n  .filter(x => x.target_type === targetType)\n  .reduce((acc, x) => {\n    acc[x.target_value] = x[field];\n    return acc;\n  }, {});\n\nconst createTagLookup = (rules, targetType) => createLookup(rules, targetType, 'tags')\n\nconst createCategoryLookup = (rules, targetType) => createLookup(rules, targetType, 'category')\n\nconst assignCategory = (transaction, transactionIdLookup, nameLookup, nameContainsLookup, categoryIdLookup) => {\n  return Object.assign(\n    transaction,\n    { 'assignedCategory': selectCategory(transaction, transactionIdLookup, nameLookup, nameContainsLookup, categoryIdLookup) }\n  )\n};\n\nconst selectCategory = (transaction, transactionIdLookup, nameLookup, nameContainsLookup, categoryIdLookup) => {\n  if (transactionIdLookup.hasOwnProperty(transaction.transaction_id)) {\n    return transactionIdLookup[transaction.transaction_id];\n  };\n\n  if (nameLookup.hasOwnProperty(transaction.name)) {\n    return nameLookup[transaction.name];\n  };\n\n  for (const nameContainsPattern of Object.keys(nameContainsLookup)) {\n    if (transaction.name.toLowerCase().includes(nameContainsPattern.toLowerCase())) {\n      return nameContainsLookup[nameContainsPattern];\n    };\n  };\n\n  if (categoryIdLookup.hasOwnProperty(transaction.category_id)) {\n    return categoryIdLookup[transaction.category_id];\n  }\n\n  return transaction.category.length > 0 ? transaction.category[0] : 'N/A';\n};\n\nexport default {\n  createSummary,\n  applyRules,\n  groupTransactions\n};\n","\nconst months = [ \"January\", \"February\", \"March\", \"April\", \"May\", \"June\",\n  \"July\", \"August\", \"September\", \"October\", \"November\", \"December\" ];\n\n\nexport default {\n  months\n};\n","import React, { Component } from 'react';\nimport ListGroup from 'react-bootstrap/ListGroup';\nimport Container from 'react-bootstrap/Container';\nimport Row from 'react-bootstrap/Row';\nimport Col from 'react-bootstrap/Col';\nimport Alert from 'react-bootstrap/Alert';\nimport Select from 'react-select';\nimport Form from 'react-bootstrap/Form';\n\nimport CategorySection from './CategorySection';\nimport './Summary.css';\nimport './TotalSection.css';\nimport helper from './helper';\nimport values from './values';\n\nclass Summary extends Component {\n\n  state = {\n    error: null,\n    success: null,\n    selectTags: ['exclude'],\n    shouldExcludeTags: true,\n    currentYear: 2019\n  }\n\n  sortCategories = (summary) => summary.slice().sort((x,y) => y.amount - x.amount)\n\n  setError = (error) => this.setState({ error: error });\n\n  setSuccess = (success) => this.setState({ success: success });\n\n  handleActiveTagChange = (data) => this.setState({ selectTags: data.map(x => x.value ) });\n\n  updateMonth = (data, action) => {\n    if (data.value !== this.props.currentMonth) {\n      this.props.updateMonth(data.value)\n    }\n  };\n\n  toggleShouldExcludeTags = (data) => {\n    if (data.target.id === 'exclude') {\n      this.setState({ shouldExcludeTags: true});\n    } else {\n      this.setState({ shouldExcludeTags: false});\n    }\n  };\n\n  render() {\n\n    const { accountId, summaryData, getSummaryData, currentMonth } = this.props;\n\n    if (summaryData) {\n\n      const { tags, categories, tagRules, categoryRules, transactions } = summaryData;\n\n      if (categories.length === 0 && transactions.length > 0) {\n        getSummaryData();\n      }\n\n      const { error, success, selectTags, shouldExcludeTags } = this.state\n\n      const updatedTransactions = helper.applyRules(transactions, categoryRules, tagRules, selectTags, shouldExcludeTags)\n      const summary = helper.createSummary(updatedTransactions);\n      const total = summary.map(x => x.amount).reduce((acc,x) => acc + x, 0);\n      const monthOptions = values.months.map(x => { return { value:x, label:x }});\n\n      return (\n        <div className=\"summary-container\">\n\n\n          <Container>\n\n            <Row className='action-alerts'>\n              <Col xs={12} >\n                {error && <Alert variant=\"danger\">{error}</Alert>}\n                {success && <Alert variant=\"success\">{success}</Alert>}\n              </Col>\n            </Row>\n\n            <Row className='summary-controller'>\n              <Col xs={12} >\n                <ListGroup>\n                  <ListGroup.Item className='controller-section'>\n                    <Container>\n                      <Row className='date-tag-select'>\n\n                        <Col xs={1} >\n                          <div>\n                            Date\n                          </div>\n                        </Col>\n                        <Col xs={3} >\n                            <Select\n                              className='active-date'\n                              label='some label'\n                              defaultValue={ monthOptions.find(x => x.value === currentMonth) }\n                              options={ monthOptions }\n                              onChange= { this.updateMonth }\n                            />\n                        </Col>\n\n\n                      </Row>\n\n                      <Row className='date-tag-select'>\n                        <Col xs={1} >\n                          <div>\n                            Tags\n                          </div>\n                        </Col>\n                        <Col xs={3} >\n                          <Select\n                            className=\"active-tags\"\n                            isMulti\n                            tags\n                            value = { selectTags.map(x => { return { value: x, label: x } }) }\n                            options={ tags.map(x => {return {value: x, label: x}}) }\n                            onChange = {this.handleActiveTagChange }\n                          />\n                        </Col>\n\n                      </Row>\n\n                      <Row className='toggle-tags'>\n                        <Col xs={3} >\n                          <Form.Check\n                            defaultChecked\n                            type=\"radio\"\n                            label='Exclude tags'\n                            name=\"excludeTags\"\n                            id=\"exclude\"\n                            onClick = { this.toggleShouldExcludeTags }\n                          />\n                        </Col>\n\n                        <Col xs={3} >\n                          <Form.Check\n                            type=\"radio\"\n                            label='Only show tags'\n                            name=\"excludeTags\"\n                            id=\"notExclude\"\n                            onClick = { this.toggleShouldExcludeTags }\n                          />\n                        </Col>\n                      </Row>\n\n                    </Container>\n\n                  </ListGroup.Item>\n                </ListGroup>\n              </Col>\n            </Row>\n\n\n            <Row>\n              <Col xs={12} >\n                <ListGroup>\n                  { this.sortCategories(summary).map(category =>\n                    <CategorySection\n                      key={category.category}\n                      category={category}\n                      allCategories={ categories.map(x => { return {value: x, label: x}}) }\n                      allTags={ tags.map(x => {return {value: x, label: x}}) }\n                      setError={ this.setError }\n                      setSuccess={ this.setSuccess }\n                      accountId= { accountId }\n                      getSummaryData = { getSummaryData }\n                    />)\n                  }\n\n                  <ListGroup.Item className='total-section entire-total'>\n                    <Container>\n                      <Row>\n                        <Col xs={9}>Total</Col>\n                        <Col className='category-subtotal' >{ Math.round(total) }</Col>\n                      </Row>\n                    </Container>\n                  </ListGroup.Item>\n                </ListGroup>\n\n              </Col>\n            </Row>\n          </Container>\n\n        </div>\n      );\n    } else {\n      return (\n        <div>\n          Loading data...\n        </div>\n      );\n    }\n  }\n}\n\nexport default Summary\n","\nimport values from './values';\nimport authHelper from './authHelper';\n\nconst loadTransactions = (accountId, monthName) => {\n  const month = values.months.indexOf(monthName) + 1;\n\n  return fetch(`/api/transactions?month=${month}`, { headers: authHelper.header() })\n    .then(res => res.json())\n    .catch(e => {\n      console.warn(\"loadTransaction failed: \")\n      console.warn(e)\n    })\n}\n\nconst loadCategoryRules = (accountId) => {\n  return fetch(`/api/category_rules`, { headers: authHelper.header() })\n    .then(res => res.json())\n    .catch(e => {\n      console.warn(\"loadCategoryRules failed: \")\n      console.warn(e)\n    })\n};\n\nconst loadTagRules = (accountId) => {\n  return fetch(`/api/tag_rules`, { headers: authHelper.header() })\n    .then(res => res.json())\n    .catch(e => {\n      console.warn(\"loadTagRules failed: \")\n      console.warn(e)\n    })\n};\n\nconst loadCategories = (accountId) => {\n  return fetch(`/api/categories`, { headers: authHelper.header() })\n    .then(res => res.json())\n    .catch(e => {\n      console.warn(\"loadCategories failed: \")\n      console.warn(e)\n    })\n}\n\nconst loadTags = (accountId) => {\n  return fetch(`/api/tags`, { headers: authHelper.header() })\n    .then(res => res.json())\n    .catch(e => {\n      console.warn(\"loadTags failed: \")\n      console.warn(e)\n    })\n}\n\nexport default {\n  loadTransactions,\n  loadCategoryRules,\n  loadTagRules,\n  loadCategories,\n  loadTags\n};\n","import React, { Component } from 'react';\nimport { Navbar, Nav } from 'react-bootstrap';\nimport { withRouter } from 'react-router-dom';\n\nimport './Navigation.css';\n\nclass Navigation extends Component {\n\n  homeHandler = () => this.props.history.push('/');\n\n  logoutHandler = () => this.props.history.push('/logout');\n\n  accountHandler = () => this.props.history.push('/account')\n\n  render() {\n    return (\n\n      <Navbar className='walet-navbar' collapseOnSelect expand=\"lg\" bg=\"dark\" variant=\"dark\">\n        <Navbar.Brand href=\"#\" onClick={ this.homeHandler } >\n          Walet\n        </Navbar.Brand>\n\n        <Navbar.Toggle aria-controls=\"responsive-navbar-nav\" />\n        <Navbar.Collapse id=\"responsive-navbar-nav\">\n          <Nav className=\"mr-auto\">\n          </Nav>\n          <Nav>\n            <Nav.Link onClick={ this.accountHandler }>\n              Account\n            </Nav.Link>\n            <Nav.Link className='logout' onClick={ this.logoutHandler }>\n              Logout\n            </Nav.Link>\n          </Nav>\n        </Navbar.Collapse>\n      </Navbar>\n\n    );\n  }\n}\n\nexport default withRouter(Navigation);\n","import React, { Component } from 'react';\nimport { withRouter } from 'react-router-dom';\n\nimport Navigation from './Navigation';\nimport authHelper from './authHelper';\n\nexport default Wrapped => {\n  class WithLogin extends Component {\n    state = {\n      accountId: null\n    };\n\n    handleError = error => {\n      this.setState({ accountId: null });\n      authHelper.removeToken();\n      this.props.history.push('/login')\n    }\n\n    componentWillMount() {\n      fetch('/api/validate/account', { headers: authHelper.header() })\n        .then(res => res.json())\n        .then(res => this.setState({ accountId: res.result }))\n        .catch(this.handleError);\n    }\n\n    render() {\n      if (this.state.accountId) {\n        return (\n          <>\n            <Navigation />\n            <Wrapped {...this.props} accountId={this.state.accountId} />\n          </>\n        );\n      } else {\n        return  (\n          <Navigation />\n        );\n      }\n    }\n  }\n\n  return withRouter(WithLogin);\n};\n","import React, { Component } from 'react';\nimport Summary from './Summary';\nimport api from './api';\nimport values from './values';\n\nimport withLogin from './withLogin';\n\nclass SummaryContainer extends Component {\n\n  state = {\n    transactions: undefined,\n    categoryRules: undefined,\n    tagRules: undefined,\n    tags: undefined,\n    categories: undefined,\n    currentMonth: values.months[new Date().getMonth()],\n  };\n\n  updateMonth = (month) => {\n    this.setState({currentMonth: month}, () => this.getSummaryData(month));\n  }\n\n  componentDidMount() {\n    this.getSummaryData()\n  };\n\n  getSummaryData = () => {\n    const { accountId } = this.props;\n    return Promise.all([\n      api.loadTransactions(accountId, this.state.currentMonth),\n      api.loadCategoryRules(accountId),\n      api.loadTagRules(accountId),\n      api.loadTags(accountId),\n      api.loadCategories(accountId)\n    ])\n      .then( res => {\n        const [\n          transactions,\n          categoryRules,\n          tagRules,\n          tags,\n          categories,\n        ] = res;\n\n        this.setState({\n          transactions: transactions.result,\n          categoryRules: categoryRules.result,\n          tagRules: tagRules.result,\n          tags: tags.result.slice().sort(),\n          categories: categories.result.slice().sort(),\n        });\n      })\n      .catch( e => {\n        console.error(\"failed loading summary data\")\n        console.error(e)\n      })\n  };\n\n  render() {\n    const { accountId } = this.props;\n    const {transactions, tags, categories, tagRules, categoryRules} = this.state;\n    const summaryData = transactions && tags && categories && tagRules && categoryRules\n      ? {\n        transactions: transactions,\n        tags: tags,\n        categories: categories,\n        tagRules: tagRules,\n        categoryRules: categoryRules,\n      }\n      : undefined\n\n    return (\n      <Summary\n        accountId={ accountId }\n        summaryData={ summaryData }\n        getSummaryData={ this.getSummaryData }\n        updateMonth = { this.updateMonth }\n        currentMonth = { this.state.currentMonth }\n      />\n    );\n  }\n};\n\nexport default withLogin(SummaryContainer);\n","import React, { Component } from 'react';\nimport Button from 'react-bootstrap/Button';\n\nimport './Login.css';\n\nclass Login extends Component {\n\n  state = {\n    authRedirectUrl: undefined\n  }\n\n  componentDidMount() {\n    fetch('/api/auth/login')\n      .then(res => res.json())\n      .then(res => this.setState({ authRedirectUrl: res.result }))\n      .catch(_ => console.error('failed to retrieve authentication url'))\n  }\n\n  render() {\n    const { authRedirectUrl } = this.state;\n\n    return (\n      <div className='login-section'>\n        <div className='login-logo'>\n          Walet\n        </div>\n          { authRedirectUrl &&\n            <a href={ authRedirectUrl }>\n              <Button variant=\"primary\" size=\"lg\" block >\n                Login\n              </Button>\n            </a>\n          }\n      </div>\n    );\n  }\n}\n\nexport default Login;\n","import React from 'react';\nimport { Redirect } from 'react-router-dom';\n\nimport authHelper from './authHelper';\n\nexport default () => {\n  authHelper.removeToken()\n  return <Redirect to='/' />\n};\n","import { parse } from 'qs';\n\nconst parameters = () => parse(window.location.search, { ignoreQueryPrefix: true });\n\nexport default {\n  parameters\n};\n","import React from 'react';\nimport { Redirect } from 'react-router-dom';\n\nimport query from './query';\nimport authHelper from './authHelper';\n\nexport default () => {\n  const jwt = query.parameters().jwt\n  authHelper.saveToken(jwt)\n  return <Redirect to='/' />\n};\n","import React, { Component } from 'react';\nimport _ from 'lodash';\n\nimport Container from 'react-bootstrap/Container';\nimport Col from 'react-bootstrap/Col';\nimport Row from 'react-bootstrap/Row';\nimport Card from 'react-bootstrap/Card';\n\nimport withLogin from './withLogin';\nimport PlaidLink from 'react-plaid-link';\nimport authHelper from './authHelper';\n\nimport './AccountPage.css'\n\nclass AccountPage extends Component {\n  state = {\n    accounts: []\n  }\n\n  handleOnSuccess = (publicToken, metadata) => {\n    const request = { publicToken: publicToken }\n    const headers = {...{ 'Content-Type': 'application/json' }, ...authHelper.header()}\n    fetch(`/api/plaid_accounts`, {\n      headers,\n      method: 'POST',\n      body: JSON.stringify(request)\n     })\n      .then(_ => this.refreshAccounts())\n  }\n\n  handleOnExit = () => {\n    console.log('customer exited')\n  }\n\n  componentDidMount() {\n    if (!this.state.accounts.length) {\n      this.refreshAccounts()\n    }\n  }\n\n  refreshAccounts = () =>\n    fetch(`/api/plaid_accounts`, { headers: authHelper.header() })\n      .then(res => res.json())\n      .then(res => this.setState({accounts: res.result}))\n\n  formatAccountDescription(account) {\n    const official = account.official_names.map(x => _.upperFirst(_.toLower(x)))\n    const names = account.names.map(x => _.upperFirst(_.toLower(x))).filter(x => !official.includes(x))\n    return _.compact(official.concat(names)).join(', ');\n  }\n\n  formatInstitution = (institutionId) => institutionId.split('_').map(x => _.upperFirst(x)).join(' ');\n\n  render() {\n    const { accounts } = this.state;\n    return (\n      <Container>\n\n        <Row>\n          <Col xs={12}>\n            <h2>Accounts</h2>\n            <PlaidLink\n              clientName=\"walet\"\n              env=\"development\"\n              product={[\"auth\", \"transactions\"]}\n              publicKey=\"d9f0a56826f5d4249fdad6f82c89d4\"\n              onExit={this.handleOnExit}\n              onSuccess={this.handleOnSuccess}>\n              Connect Bank\n            </PlaidLink>\n          </Col>\n        </Row>\n\n        <div className='linked-accounts'>\n          { accounts.map(account =>\n            <Row key={account.item_id} className='account-row'>\n              <Card style={{ width: '40rem' }}>\n                <Card.Body>\n                  <Card.Title>{this.formatInstitution(account.institution_id)}</Card.Title>\n                  <Card.Text>\n                    {this.formatAccountDescription(account)}\n                  </Card.Text>\n                  {/* TODO: add remove capability */}\n                  <Card.Link href=\"#\">Remove</Card.Link>\n                </Card.Body>\n              </Card>\n            </Row>\n          )}\n        </div>\n\n      </Container>\n\n    );\n  }\n};\n\nexport default withLogin(AccountPage);\n","import React, { Component } from 'react';\nimport { BrowserRouter as Router, Route } from 'react-router-dom';\n\nimport SummaryContainer from './SummaryContainer';\nimport Login from './Login';\nimport Logout from './Logout';\nimport Auth from './Auth';\nimport AccountPage from './AccountPage';\n\nclass App extends Component {\n  render() {\n    return (\n      <div>\n        <Router>\n          <>\n            <Route exact path=\"/\" component={SummaryContainer} />\n            <Route exact path=\"/account\" component={AccountPage} />\n            <Route exact path =\"/login\" component={Login} />\n            <Route exact path =\"/logout\" component={Logout} />\n            <Route exact path =\"/auth\" component={Auth} />\n          </>\n        </Router>\n      </div>\n    );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\nif (module.hot) {\n  module.hot.accept();\n}\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}